import{j as _}from"./index-DTwl35de.js";const v={hair_camera_analysis:{hair_density:{range:"0-100",description:"Hair density score",interpretation:{"0-33":"Low density (sparse hair)","34-66":"Medium density (average hair)","67-100":"High density (thick, full hair)"},note:"Higher score = denser hair. Track improvements like: 35 → 45"},hair_thickness:{range:"0-100",description:"Hair strand thickness score",interpretation:{"0-33":"Thin hair strands","34-66":"Medium thickness strands","67-100":"Thick, strong strands"},note:"Higher score = thicker individual hair strands"},damage_level:{range:"0-100",description:"Hair damage score",interpretation:{"0-25":"Minimal damage (healthy hair)","26-50":"Mild damage (some issues)","51-75":"Moderate damage (needs attention)","76-100":"Severe damage (requires treatment)"},note:"Higher score = more damage. Goal is to reduce this score over time"},scalp_condition:{range:"0-100",description:"Scalp health score",interpretation:{"0-25":"Very unhealthy (irritated, severe issues)","26-50":"Poor condition (dryness, flaking)","51-75":"Fair condition (minor issues)","76-100":"Excellent condition (healthy scalp)"},note:"Higher score = healthier scalp. Track improvements over time"},hair_type:{range:"1-4",description:"Hair type classification (categorical)",interpretation:{1:"Straight hair",2:"Wavy hair",3:"Curly hair",4:"Coily hair"},note:"This is categorical, not a score. It describes hair pattern."}},dietary_tags:["vegetarian","vegan","non-vegetarian","gluten-free","contains-dairy","nut-free","egg-free"]},w={scoring_guide:v},k=(e,t)=>{if(typeof e=="string"&&e.includes("-")){const[s,n]=e.split("-").map(r=>Number(r));return t>=s&&t<=n}const i=Number(e);return t===i},u=(e,t)=>{const i=w.scoring_guide.hair_camera_analysis[e];if(!i)return{label:"Unknown",description:"",raw:t};const s=i.interpretation||{};let n="Unknown";for(const r of Object.keys(s))if(k(r,t)){n=s[r];break}return{raw:t,label:n,description:i.description||"",note:i.note||""}},M=e=>{const t=new Set,i=w.scoring_guide.dietary_tags||[];if(e.answers?.dietary){const a=e.answers.dietary;i.includes(a)&&t.add(a)}const s=e.hair_density??e.answers?.hair_density,n=e.hair_thickness??e.answers?.hair_thickness,r=e.damage_level??e.answers?.damage_level;return s!==void 0&&s<40&&t.add("low-density"),n!==void 0&&n<40&&t.add("thin-hair"),r!==void 0&&r>60&&t.add("high-damage"),Array.from(t)},T=e=>{const t=["Complete Blood Count (CBC)","Serum Ferritin (Iron stores)","Serum Iron & TIBC","Thyroid Stimulating Hormone (TSH)","Free T4 / Free T3","Vitamin B12","Vitamin D (25-OH)","Zinc","Liver function (ALT/AST)","Sex Hormone profile (if clinically indicated: testosterone, DHEA, SHBG)"],i=new Set(t);return e.answers?.gastric&&e.answers.gastric!=="No"&&(i.add("Celiac serology (if malabsorption suspected)"),i.add("Folate")),e.answers?.medication&&e.answers.medication!=="No"&&i.add("Medication review with prescriber"),Array.from(i)},H=e=>{const t=e.report??e,i=t.hair_density??e.answers?.hair_density??0,s=t.hair_thickness??e.answers?.hair_thickness??0,n=t.damage_level??e.answers?.damage_level??0,r=t.scalp_condition??e.answers?.scalp_condition??0,a=t.hair_type??e.answers?.hair_type??1,c=u("hair_density",i),d=u("hair_thickness",s),l=u("damage_level",n),m=u("scalp_condition",r),y=w.scoring_guide.hair_camera_analysis.hair_type.interpretation[String(a)]||"Unknown",p=Math.round((100-i)*.6+n*.4),g=M({...t,answers:e.answers}),o=[];p>60&&o.push("Androgenic/Patterned hair loss likely"),n>70&&o.push("Mechanical/chemical damage likely"),r<40&&o.push("Scalp dermatological condition possible (dandruff/seborrhea)"),e.answers?.familyHistory&&e.answers.familyHistory!=="No"&&o.push("Family history suggests genetic contribution"),(e.answers?.stress??0)>=8&&o.push("High stress may contribute");const h=new Set(e.recommendations||[]);n>60&&h.add("Reduce chemical/heat styling; use protein repairing treatments"),i<50&&h.add("Consider topical minoxidil or specialist referral"),r<50&&h.add("Treat scalp condition with medicated shampoo (ketoconazole) or dermatologist review");const f=T(e);return{metrics:{hair_density:{value:i,interpretation:c},hair_thickness:{value:s,interpretation:d},damage_level:{value:n,interpretation:l},scalp_condition:{value:r,interpretation:m},hair_type:{value:a,interpretation:y}},hair_loss:{lossRisk:p,causes:o,symptoms:e.answers||{}},nutrition:{tags:g,aiNarrative:`Nutrition analysis based on symptoms & answers — ${g.join(", ")||"No specific tags"}.`},recommendations:Array.from(h),bloodTests:f,generatedAt:new Date().toISOString(),generatedBy:"rule-and-heuristic-engine-v1"}},S=({data:e=[],size:t=160})=>{const i=e.reduce((c,d)=>c+Math.max(0,d.value),0)||1;let s=0;const n=t/2,r=t/2,a=t/2-4;return _.jsxs("svg",{width:t,height:t,viewBox:`0 0 ${t} ${t}`,children:[e.map((c,d)=>{const l=s/i*Math.PI*2;s+=Math.max(0,c.value);const m=s/i*Math.PI*2,y=m-l>Math.PI?1:0,p=n+a*Math.cos(l),g=r+a*Math.sin(l),o=n+a*Math.cos(m),h=r+a*Math.sin(m),f=`M ${n} ${r} L ${p} ${g} A ${a} ${a} 0 ${y} 1 ${o} ${h} Z`;return _.jsx("path",{d:f,fill:c.color||`hsl(${d*60%360}deg,60%,60%)`},d)}),_.jsx("circle",{cx:n,cy:r,r:a*.5,fill:"#fff"})]})};export{S as P,H as g};
